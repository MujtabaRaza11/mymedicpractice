{{ 'section-promotion-countdown-banner.css' | asset_url | stylesheet_tag }}
<script src="{{ 'countdown-timer.js' | asset_url }}" defer="defer"></script>

<div class="promotion-countdown-section" 
     data-end-time="{{ section.settings.end_time }}"
     data-section-id="{{ section.id }}">
  <div class="promotion-banner {% if section.settings.full_width %}full-width{% endif %}">
    <div class="promotion-banner__image-container">
      {%- if section.settings.image != blank -%}
        <img srcset="{%- if section.settings.image.width >= 375 -%}{{ section.settings.image | image_url: width: 375 }} 375w,{%- endif -%}
                     {%- if section.settings.image.width >= 750 -%}{{ section.settings.image | image_url: width: 750 }} 750w,{%- endif -%}
                     {%- if section.settings.image.width >= 1100 -%}{{ section.settings.image | image_url: width: 1100 }} 1100w,{%- endif -%}
                     {%- if section.settings.image.width >= 1500 -%}{{ section.settings.image | image_url: width: 1500 }} 1500w,{%- endif -%}
                     {%- if section.settings.image.width >= 2200 -%}{{ section.settings.image | image_url: width: 2200 }} 2200w,{%- endif -%}
                     {%- if section.settings.image.width >= 3000 -%}{{ section.settings.image | image_url: width: 3000 }} 3000w,{%- endif -%}"
             sizes="100vw"
             src="{{ section.settings.image | image_url: width: 1500 }}"
             loading="lazy"
             alt="{{ section.settings.image.alt | escape }}"
             width="{{ section.settings.image.width }}"
             height="{{ section.settings.image.height }}"
             class="promotion-banner__image promotion-banner__image-desktop">
      {%- else -%}
        {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
      {%- endif -%}
      
      {%- if section.settings.image_mobile != blank -%}
        <img srcset="{%- if section.settings.image_mobile.width >= 375 -%}{{ section.settings.image_mobile | image_url: width: 375 }} 375w,{%- endif -%}
                     {%- if section.settings.image_mobile.width >= 750 -%}{{ section.settings.image_mobile | image_url: width: 750 }} 750w,{%- endif -%}
                     {%- if section.settings.image_mobile.width >= 1100 -%}{{ section.settings.image_mobile | image_url: width: 1100 }} 1100w,{%- endif -%}"
             sizes="100vw"
             src="{{ section.settings.image_mobile | image_url: width: 750 }}"
             loading="lazy"
             alt="{{ section.settings.image_mobile.alt | escape }}"
             width="{{ section.settings.image_mobile.width }}"
             height="{{ section.settings.image_mobile.height }}"
             class="promotion-banner__image promotion-banner__image-mobile">
      {%- endif -%}
      
      <div class="promotion-banner__overlay"></div>
    </div>
    
    <div class="promotion-banner__content-container promotion-position-{{ section.settings.content_position }} promotion-position-mobile-{{ section.settings.mobile_content_position }}">
      <div class="promotion-banner__content-wrapper content-alignment-{{ section.settings.content_alignment }} content-alignment-mobile-{{ section.settings.mobile_content_alignment }}">
        {%- if section.settings.show_label -%}
          <p class="promotion-banner__label" style="
            font-size: {{ section.settings.label_font_size }}px;
            font-weight: {{ section.settings.label_font_weight }};
            color: {{ section.settings.label_color }};
          ">{{ section.settings.label_text }}</p>
        {%- endif -%}
        
        {%- if section.settings.heading != blank -%}
          <h2 class="promotion-banner__heading" style="
            font-size: {{ section.settings.heading_font_size }}px;
            font-weight: {{ section.settings.heading_font_weight }};
            color: {{ section.settings.heading_color }};
          ">{{ section.settings.heading }}</h2>
        {%- endif -%}
        
        {%- if section.settings.subheading != blank -%}
          <p class="promotion-banner__subheading" style="
            font-size: {{ section.settings.subheading_font_size }}px;
            font-weight: {{ section.settings.subheading_font_weight }};
            color: {{ section.settings.subheading_color }};
          ">{{ section.settings.subheading }}</p>
        {%- endif -%}
        
        <div class="promotion-banner__countdown">
          <div class="countdown-timer" style="color: {{ section.settings.timer_color }};">
            <div class="countdown-timer__item">
              <span class="countdown-timer__number" data-days style="
                font-size: {{ section.settings.timer_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">0</span>
              <span class="countdown-timer__label" style="
                font-size: {{ section.settings.timer_label_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">DAY</span>
            </div>
            <span class="countdown-timer__separator" style="
              font-size: {{ section.settings.timer_font_size }}px;
              color: {{ section.settings.timer_color }};
            ">:</span>
            <div class="countdown-timer__item">
              <span class="countdown-timer__number" data-hours style="
                font-size: {{ section.settings.timer_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">00</span>
              <span class="countdown-timer__label" style="
                font-size: {{ section.settings.timer_label_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">HOUR</span>
            </div>
            <span class="countdown-timer__separator" style="
              font-size: {{ section.settings.timer_font_size }}px;
              color: {{ section.settings.timer_color }};
            ">:</span>
            <div class="countdown-timer__item">
              <span class="countdown-timer__number" data-minutes style="
                font-size: {{ section.settings.timer_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">00</span>
              <span class="countdown-timer__label" style="
                font-size: {{ section.settings.timer_label_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">MIN</span>
            </div>
            <span class="countdown-timer__separator" style="
              font-size: {{ section.settings.timer_font_size }}px;
              color: {{ section.settings.timer_color }};
            ">:</span>
            <div class="countdown-timer__item">
              <span class="countdown-timer__number" data-seconds style="
                font-size: {{ section.settings.timer_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">00</span>
              <span class="countdown-timer__label" style="
                font-size: {{ section.settings.timer_label_font_size }}px;
                color: {{ section.settings.timer_color }};
              ">SEC</span>
            </div>
          </div>
        </div>
        
        {%- if section.settings.button_text != blank -%}
          <div class="promotion-banner__button-container button-position-{{ section.settings.button_position }} button-position-mobile-{{ section.settings.mobile_button_position }}">
            <a href="{{ section.settings.button_link }}" class="promotion-banner__button" style="
              padding: {{ section.settings.button_padding_v }}px {{ section.settings.button_padding_h }}px;
              font-size: {{ section.settings.button_font_size }}px;
              font-weight: {{ section.settings.button_font_weight }};
              color: {{ section.settings.button_text_color }};
              background-color: {{ section.settings.button_bg_color }};
            ">
              {{ section.settings.button_text }}
            </a>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

<style>
  /* Add hover styling for button that can't be done with inline styles */
  #shopify-section-{{ section.id }} .promotion-banner__button:hover {
    background-color: {{ section.settings.button_hover_bg_color }} !important;
  }
  .promotion-banner__content-container {
    background-color: rgba(0, 0, 0, {{ section.settings.image_overlay_opacity }}%);
  }

  /* Mobile responsive styles */
  @media screen and (max-width: 768px) {
    #shopify-section-{{ section.id }} .promotion-banner__label {
      font-size: {{ section.settings.mobile_label_font_size }}px !important;
    }
    #shopify-section-{{ section.id }} .promotion-banner__heading {
      font-size: {{ section.settings.mobile_heading_font_size }}px !important;
    }
    #shopify-section-{{ section.id }} .promotion-banner__subheading {
      font-size: {{ section.settings.mobile_subheading_font_size }}px !important;
    }
    #shopify-section-{{ section.id }} .countdown-timer__number,
    #shopify-section-{{ section.id }} .countdown-timer__separator {
      font-size: {{ section.settings.mobile_timer_font_size }}px !important;
    }
    #shopify-section-{{ section.id }} .countdown-timer__label {
      font-size: {{ section.settings.mobile_timer_label_font_size }}px !important;
    }
    #shopify-section-{{ section.id }} .promotion-banner__button {
      font-size: {{ section.settings.mobile_button_font_size }}px !important;
    }
  }
</style>

{% schema %}
{
  "name": "Promotion Countdown",
  "settings": [
    {
      "type": "header",
      "content": "Banner Images"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Mobile Image"
    },
    {
      "type": "range",
      "id": "image_overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Image overlay opacity",
      "default": 20
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width",
      "default": true
    },
    {
      "type": "header",
      "content": "Content Settings"
    },
    {
      "type": "select",
      "id": "content_position",
      "label": "Content position",
      "options": [
        {
          "value": "top-left",
          "label": "Top left"
        },
        {
          "value": "top-center",
          "label": "Top center"
        },
        {
          "value": "top-right",
          "label": "Top right"
        },
        {
          "value": "middle-left",
          "label": "Middle left"
        },
        {
          "value": "middle-center",
          "label": "Middle center"
        },
        {
          "value": "middle-right",
          "label": "Middle right"
        },
        {
          "value": "bottom-left",
          "label": "Bottom left"
        },
        {
          "value": "bottom-center",
          "label": "Bottom center"
        },
        {
          "value": "bottom-right",
          "label": "Bottom right"
        }
      ],
      "default": "middle-left"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Label Text Settings"
    },
    {
      "type": "checkbox",
      "id": "show_label",
      "label": "Show label text",
      "default": true
    },
    {
      "type": "text",
      "id": "label_text",
      "label": "Label text",
      "default": "LIMITED TIME ONLY"
    },
    {
      "type": "range",
      "id": "label_font_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 14
    },
    {
      "type": "range",
      "id": "label_font_weight",
      "min": 300,
      "max": 900,
      "step": 100,
      "label": "Font weight",
      "default": 500
    },
    {
      "type": "color",
      "id": "label_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Heading Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Sale now on!"
    },
    {
      "type": "range",
      "id": "heading_font_size",
      "min": 20,
      "max": 72,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 38
    },
    {
      "type": "range",
      "id": "heading_font_weight",
      "min": 300,
      "max": 900,
      "step": 100,
      "label": "Font weight",
      "default": 700
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Subheading Settings"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Our best offers won't be around forever!"
    },
    {
      "type": "range",
      "id": "subheading_font_size",
      "min": 12,
      "max": 28,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 16
    },
    {
      "type": "range",
      "id": "subheading_font_weight",
      "min": 300,
      "max": 900,
      "step": 100,
      "label": "Font weight",
      "default": 400
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Timer Settings"
    },
    {
      "type": "range",
      "id": "timer_font_size",
      "min": 16,
      "max": 48,
      "step": 1,
      "unit": "px",
      "label": "Timer font size",
      "default": 28
    },
    {
      "type": "range",
      "id": "timer_label_font_size",
      "min": 8,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Timer label font size",
      "default": 10
    },
    {
      "type": "color",
      "id": "timer_color",
      "label": "Timer color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "SHOP NOW"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "range",
      "id": "button_padding_v",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Vertical padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_padding_h",
      "min": 10,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 24
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 14
    },
    {
      "type": "range",
      "id": "button_font_weight",
      "min": 300,
      "max": 900,
      "step": 100,
      "label": "Font weight",
      "default": 700
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Background color",
      "default": "#e52e2e"
    },
    {
      "type": "color",
      "id": "button_hover_bg_color",
      "label": "Hover background color",
      "default": "#c42020"
    },
    {
      "type": "select",
      "id": "button_position",
      "label": "Button position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Countdown Settings"
    },
    {
      "type": "text",
      "id": "end_time",
      "label": "End time (YYYY-MM-DD HH:MM:SS)",
      "info": "Set the date and time when the countdown should end (format: YYYY-MM-DD HH:MM:SS)",
      "default": "2023-12-31 23:59:59"
    },
    {
      "type": "header",
      "content": "Mobile Settings"
    },
    {
      "type": "select",
      "id": "mobile_content_position",
      "label": "Mobile content position",
      "options": [
        {
          "value": "top-left",
          "label": "Top left"
        },
        {
          "value": "top-center",
          "label": "Top center"
        },
        {
          "value": "top-right",
          "label": "Top right"
        },
        {
          "value": "middle-left",
          "label": "Middle left"
        },
        {
          "value": "middle-center",
          "label": "Middle center"
        },
        {
          "value": "middle-right",
          "label": "Middle right"
        },
        {
          "value": "bottom-left",
          "label": "Bottom left"
        },
        {
          "value": "bottom-center",
          "label": "Bottom center"
        },
        {
          "value": "bottom-right",
          "label": "Bottom right"
        }
      ],
      "default": "middle-left"
    },
    {
      "type": "select",
      "id": "mobile_content_alignment",
      "label": "Mobile text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "mobile_label_font_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Mobile label font size",
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile_heading_font_size",
      "min": 18,
      "max": 42,
      "step": 1,
      "unit": "px",
      "label": "Mobile heading font size",
      "default": 28
    },
    {
      "type": "range",
      "id": "mobile_subheading_font_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Mobile subheading font size",
      "default": 14
    },
    {
      "type": "range",
      "id": "mobile_timer_font_size",
      "min": 14,
      "max": 36,
      "step": 1,
      "unit": "px",
      "label": "Mobile timer font size",
      "default": 22
    },
    {
      "type": "range",
      "id": "mobile_timer_label_font_size",
      "min": 6,
      "max": 14,
      "step": 1,
      "unit": "px",
      "label": "Mobile timer label font size",
      "default": 8
    },
    {
      "type": "range",
      "id": "mobile_button_font_size",
      "min": 8,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Mobile button font size",
      "default": 12
    },
    {
      "type": "select",
      "id": "mobile_button_position",
      "label": "Mobile button position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    }
  ],
  "presets": [
    {
      "name": "Promotion Countdown",
      "category": "Promotional"
    }
  ]
}
{% endschema %} 